<md-dialog flex="50" flex-sm="70">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h2>Open de auto op afstand</h2>
      <span flex></span>
      <md-button class="md-icon-button" ng-click="cancel()">
        <md-icon>close</md-icon>
      </md-button>
    </div>
  </md-toolbar>

  <md-dialog-content>    
    <div layout="column" layout-margin class="md-dialog-content" ng-if="booking.resource.boardcomputer">
      <h3 ng-if="booking.resource.locktypes.indexOf('chipcard') < 0">Smartphone</h3>
      <h3 ng-if="booking.resource.locktypes.indexOf('chipcard') >= 0">Smartphone en chipkaart</h3>
      <p ng-if="booking.resource.locktypes.indexOf('chipcard') < 0">Een huurder opent deze auto met een smartphone. Dit kan de huurder zelf doen via de <a href="https://mywheels.nl/autodelen/hoe-autodelen-werkt/deelauto-app/" target="_blank" title="MyWheels app">MyWheels app</a> of op <a href="https://mywheels.nl" target="_blank" title="MyWheels.nl">MyWheels.nl</a>.</p>

      <p ng-if="booking.resource.locktypes.indexOf('chipcard') >= 0">Een huurder opent deze auto met een smartphone of een OV-chipkaart. Openen met de smartphone kan de huurder zelf doen via de <a href="https://mywheels.nl/autodelen/hoe-autodelen-werkt/deelauto-app/" target="_blank" title="MyWheels app">MyWheels app</a> of op <a href="https://mywheels.nl" target="_blank" title="MyWheels.nl">MyWheels.nl</a>. Openen met de OV-chipkaart kan de huurder doen door de OV-chipkaart voor de lezer te houden. De auto opent binnen 15 seconden.</p>

      <p ng-if="booking.resource.locktypes.indexOf('chipcard') >= 0">Meer informatie over het koppelen van een nieuwe OV-chipkaart vind je onder de knop <strong>[Chipkaart]</strong>.</p>

      <div ng-if="booking.person.status !== 'active' || booking.approved === 'BUY_VOUCHER' || booking.status !== 'accepted' || booking.beginBooking > now || booking.endBooking < now">
        <strong class="text-danger">Let op! De rit is niet in orde</strong><br/>
        <span ng-if="booking.person.status !== 'active'">De huurder heeft nog geen geactiveerd account.<br/></span>
        <span ng-if="booking.approved === 'BUY_VOUCHER'">De huurder heeft de rit nog niet betaald of de betaling is nog niet goedgekeurd.<br/></span>
        <span ng-if="booking.endBooking < now">
          De rit is reeds afgelopen en eindigde om {{ booking.endBooking | amDateFormat:'DD-MM-YYYY HH:mm' }}. Wijzig de eindtijd via de knop <strong>[Verlengen]</strong> om de huurder weer toegang te geven of maak een nieuwe reservering via de knop <strong>[Boeken]</strong>.
          <br/><br/>
          <strong>Noodgeval</strong><br/>
          Is de huurder onderweg en lukt het niet om te verlengen of een nieuwe boeking te maken? Klik dan <a ng-click="myfms()"><strong>[hier]</strong></a> om de auto op afstand te openen en de startblokkering eraf te halen. De sleutel moet uit het contactslot zijn.
          <br><br>
          <i>Verifieer eerst de huurder door het telefoonnummer en de eindtijd van de reservering te vragen.</i>
        </span>
        <span ng-if="booking.beginBooking > now">De rit begint pas om {{ booking.beginBooking | amDateFormat:'DD-MM-YYYY HH:mm' }}. De huurder kan pas de auto in als de rit begonnen is.</span>
      </div>

      <div ng-if="booking.person.status === 'active' && booking.approved !== 'BUY_VOUCHER' && booking.status === 'accepted' && booking.beginBooking < now && booking.endBooking > now">
        Klik hieronder op <strong>[Versturen]</strong> om de auto op afstand te openen en de startblokkering eraf te halen.
        <br><br>
        <i>Verifieer eerst de huurder door het telefoonnummer en de eindtijd van de reservering te vragen.</i>
      </div>

      <div ng-if="booking.person.status === 'active' && (booking.approved === 'OK' || !booking.approved) && booking.status === 'accepted' && booking.beginBooking < now && booking.endBooking > now">
        <span>
          <strong>Opent de auto niet?</strong>
          <ul>
            <li>Controleer of de huurder bij kenteken {{ booking.resource.registrationPlate }} staat.</li>
            <li>Vraag de huurder alle deuren en de achterklep stevig dicht te drukken, en open de auto nogmaals.</li>
        </span>
      </div>
    </div>

  </md-dialog-content>

  <md-dialog-actions layout="row">
    <span flex></span>
    <md-button ng-click="cancel()">
     Sluiten
    </md-button>
    <md-button class="md-primary md-raised" ng-click="done()" ng-disabled="booking.person.status !== 'active' || booking.approved === 'BUY_VOUCHER' || booking.status !== 'accepted' || booking.beginBooking > now">
      Versturen
    </md-button>
  </md-dialog-actions>
</md-dialog>
