<md-dialog class="handleiding" flex="50" flex-sm="70">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h2>Handleiding</h2>
      <span flex></span>
      <md-button class="md-icon-button" ng-click="cancel()">
        <md-icon>close</md-icon>
      </md-button>
    </div>
  </md-toolbar>

  <md-dialog-content>
    <div class="md-dialog-content">
      <div ng-if="booking && (booking.beginBooking > now() || booking.endBooking < now())">
        <strong class="text-danger">Let op! De rit is niet in orde</strong><br/>

        <span ng-if="booking.endBooking < now()">
          <strong ng-if="immobilized.yes">
            De auto start niet omdat de startblokkering automatisch ingeschakeld is op {{ immobilized.since | amDateFormat:'DD-MM-YYYY HH:mm' }}.
          </strong>

          De rit is namelijk reeds afgelopen en eindigde om {{ booking.endBooking | amDateFormat:'DD-MM-YYYY HH:mm' }}. 

          <br><br>

          Wijzig de eindtijd via de knop <strong>[Verlengen]</strong> of maak een nieuwe reservering via de knop <strong>[Boeken]</strong>.

          <span ng-if="immobilized.yes">
            Open de auto vervolgens met de knop <strong>[Openen]</strong>.
          </span>
          
        </span>

        <span ng-if="booking.beginBooking > now()">De rit begint pas om {{ booking.beginBooking | amDateFormat:'DD-MM-YYYY HH:mm' }}. De huurder kan pas de auto in als de rit begonnen is.</span>
      </div>

      <div ng-if="booking && immobilized.yes && booking.endBooking >= now() && booking.beginBooking <= now()">
        <strong class="text-danger">Let op! De startblokkering is ingeschakeld.</strong><br />
        De auto start niet omdat de startblokkering automatisch ingeschakeld is op {{ immobilized.since | amDateFormat:'DD-MM-YYYY HH:mm' }}.<br />
        Open de auto met de knop <strong>[Openen]</strong>.
      </div>
      

      <div>
        Hieronder kun je middels steekwoorden een vraag zoeken.
      </div>

      <input
        style="
          margin: 1rem 0;
          padding: 2px 6px;
          width: 80%;
          font-size: 1.8rem;
          margin-top: 20px;
          margin-bottom: 20px;
        "
        placeholder="Zoeken op een steekwoord..."
        ng-model="state.searchText"
        ng-change="search()"
      />

      <div class="results">
        <p ng-if="items.length === 0">
          Geen items gevonden
        </p>

        <p ng-if="state.searching" style="text-align: center;">
          {{ searchResults.length }}
          {{ searchResults.length === 1 ? 'resultaat' : 'resultaten' }}
        </p>

        <div
          ng-repeat="item in searchResults"
          class="item"
          ng-class="{
            open: state.selected === item.id
          }"
        >
          <h4 ng-click="state.selected = (state.selected === item.id) ? -1 : item.id">{{ item.title }}</h4>
          <div ng-if="state.selected === item.id" class="content">
            <img style="float: right; max-width: 200px; height: auto; max-height: 200px; margin: 0 0 1rem 1rem;" ng-src="{{ url }}" ng-repeat="url in item.images" />
            <div ng-bind-html="item.content | marked"></div>
            <div style="clear: both;"></div>
          </div>
        </div>
      </div>
    </div>
  </md-dialog-content>

  <md-dialog-actions layout="row">
    <span flex></span>
    <md-button ng-click="cancel()">
      Sluiten
    </md-button>
  </md-dialog-actions>
</md-dialog>
